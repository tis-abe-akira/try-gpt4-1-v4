# Service層テスト観点まとめ

## CustomerService

### 正常系

- 顧客一覧取得（ページングあり）
- 顧客詳細取得（存在するID）
- 顧客新規作成（バリデーションOK）
- 顧客更新（存在するID、バリデーションOK）
- 顧客削除（存在するID、プロジェクト未紐付け）

### 異常系

- 顧客詳細取得（存在しないID→404）
- 顧客新規作成（nameが空/6文字以上→400）
- 顧客新規作成（contact/industryが空→400）
- 顧客更新（存在しないID→404）
- 顧客更新（nameが空/6文字以上→400）
- 顧客削除（存在しないID→404）
- 顧客削除（紐付くプロジェクトが存在→外部キー制約エラー）

---

## ProjectService

### 正常系

- プロジェクト一覧取得（ページングあり）
- プロジェクト詳細取得（存在するID）
- プロジェクト新規作成（バリデーションOK、存在するcustomerId）
- プロジェクト新規作成（salesAmountに応じてprojectRankが自動決定されることを検証）
- プロジェクト更新（存在するID、バリデーションOK、存在するcustomerId）
- プロジェクト更新（salesAmountに応じてprojectRankが自動決定されることを検証）
  - salesAmount=12000ならSランクになること
  - salesAmount=9000ならAランクになること
  - salesAmount=6000ならBランクになること
  - salesAmount=3000ならCランクになること
  - salesAmount=1000ならDランクになること
- プロジェクト削除（存在するID）

### 異常系

- プロジェクト詳細取得（存在しないID→404）
- プロジェクト新規作成（customerIdが存在しない→400）
- プロジェクト新規作成（必須項目未入力→400）
- プロジェクト更新（存在しないID→404）
- プロジェクト更新（customerIdが存在しない→400）
- プロジェクト削除（存在しないID→404）

---

## 共通

- バリデーションエラー時、エラー詳細（field, message）が返ること
- 例外時、適切なHTTPステータス・メッセージが返ること
